@model PEngineV.Models.HomeViewModel
@inject Microsoft.Extensions.Localization.IStringLocalizer<PEngineV.SharedResource> L
@{
    ViewData["Title"] = L["Home_Title"];
}

<div class="pe-section">
    <h1>@L["Home_RecentPosts"]</h1>
</div>

<div class="pe-panel">
    <div class="pe-panel-header">
        <i class="fa-solid fa-folder pe-panel-icon"></i>
        posts/
    </div>
    <ul class="pe-post-list">
        @foreach (var item in Model.Posts)
        {
            @if (!string.IsNullOrEmpty(item.Category))
            {
                <li class="pe-post-item pe-post-item-dir">
                    <a class="pe-post-link" asp-controller="Post" asp-action="Read" asp-route-id="@item.Id">
                        <div class="pe-post-title">
                            <i class="fa-solid fa-folder pe-file-icon pe-file-icon-dir"></i>
                            @item.Category/
                        </div>
                        <div class="pe-post-meta">@item.Author &middot; @item.PublishedAt.ToString("yyyy-MM-dd")</div>
                    </a>
                </li>
            }
            else
            {
                <li class="pe-post-item">
                    <a class="pe-post-link" asp-controller="Post" asp-action="@(item.IsProtected ? "Protected" : "Read")" asp-route-id="@item.Id">
                        <div class="pe-post-title">
                            <i class="fa-solid fa-file-lines pe-file-icon"></i>
                            @item.Title
                            @if (item.IsProtected)
                            {
                                <span class="pe-badge pe-badge-protected">protected</span>
                            }
                        </div>
                        <div class="pe-post-meta">@item.Author &middot; @item.PublishedAt.ToString("yyyy-MM-dd")</div>
                    </a>
                </li>
            }
        }
    </ul>
</div>
